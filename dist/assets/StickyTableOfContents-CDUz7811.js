import{j as e}from"./index-CWlelDH9.js";import{r as t}from"./react-vendor-Bz3rmKJE.js";import{X as s,L as r}from"./ui-components-Cj2e1Vi_.js";const n=({sections:n})=>{const[o,a]=t.useState(""),[l,i]=t.useState(!1),[d,c]=t.useState(0);t.useEffect(()=>{const e=()=>{const e=window.scrollY+100,t=document.documentElement.scrollHeight-window.innerHeight,s=window.scrollY/t*100;c(Math.min(s,100));let r="";for(const o of n){const t=document.getElementById(o.id);if(t){e>=t.offsetTop&&(r=o.id)}}a(r)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[n]);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(!l),className:"fixed bottom-20 right-6 z-40 bg-gradient-to-r from-sky-500 to-blue-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-110 border-2 border-white","aria-label":"Abrir índice",children:l?e.jsx(s,{className:"h-6 w-6"}):e.jsx(r,{className:"h-6 w-6"})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm",onClick:()=>i(!1)}),e.jsxs("div",{className:`\n          fixed z-50 bg-white rounded-2xl shadow-2xl border border-gray-200\n          transition-all duration-300 ease-in-out\n          top-24 right-6 w-80 max-h-[calc(100vh-120px)] overflow-hidden\n          ${l?"translate-x-0 opacity-100":"translate-x-full opacity-0 pointer-events-none"}\n        `,children:[e.jsx("div",{className:"relative h-1 bg-gray-100",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-sky-500 to-blue-600 transition-all duration-300",style:{width:`${d}%`}})}),e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-sky-50 to-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{className:"h-5 w-5 text-sky-600"}),e.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"Índice del artículo"})]}),e.jsx("button",{onClick:()=>i(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[Math.round(d),"% leído"]})]}),e.jsx("nav",{className:"overflow-y-auto max-h-[calc(100vh-220px)] p-4 space-y-1",children:n.map(t=>{const s=o===t.id,r=t.level||1;return e.jsx("button",{onClick:()=>(e=>{const t=document.getElementById(e);if(t){const e=80,s=t.getBoundingClientRect().top+window.scrollY-e;window.scrollTo({top:s,behavior:"smooth"}),i(!1)}})(t.id),className:`\n                  block w-full text-left px-4 py-3 rounded-lg transition-all duration-200\n                  ${2===r?"pl-8 text-sm":"text-sm font-medium"}\n                  ${s?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-md transform scale-105":"text-gray-700 hover:bg-gray-100 hover:text-sky-600"}\n                `,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:`\n                    flex-shrink-0 mt-0.5\n                    ${s?"text-white":"text-sky-500"}\n                  `,children:1===r?"•":"◦"}),e.jsx("span",{className:"flex-1 leading-tight",children:t.title})]})},t.id)})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50 text-center",children:e.jsxs("p",{className:"text-xs text-gray-600",children:[n.length," secciones"]})})]})]})};export{n as S};
